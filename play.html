<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR CODES</title>
    <style>
        body {
          margin: 0;
          overflow: hidden;
          background-color: white;
          color: black;
        }
        canvas {
          position: absolute;
          left: 0;
          top: 0;
          z-index: -1;
        }
    </style>
</head>
<body>

    <p>Rotate your device:</p>
    gamma(x):<a id='gamma'> </a><sup>o</sup><br>
    beta(y):<a id='beta'> </a><sup>o</sup><br>
    alpha(z):<a id='alpha'> </a><sup>o</sup><br>

<script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.17.1/matter.min.js"></script>
<script>
    // Device orientation handler
    function handleOrientation(event) {
      var x = event.gamma; // In degrees [-90,90]
      var y = event.beta;  // In degrees [-180,180]
      var z = event.alpha; // In degrees [0,360]
    
      // Display orientation values
      document.getElementById("gamma").innerHTML = Math.round(x);
      document.getElementById("beta").innerHTML = Math.round(y);
      document.getElementById("alpha").innerHTML = Math.round(z);

      // Update gravity based on device orientation
      const scale = 0.02;
      engine.world.gravity.y = y * scale;
      engine.world.gravity.x = x * scale;
    }

    window.addEventListener('deviceorientation', handleOrientation);

    // Matter.js aliases
    var Engine = Matter.Engine,
        Render = Matter.Render,
        World = Matter.World,
        Bodies = Matter.Bodies;

    // Create the Matter.js engine
    var engine = Engine.create();

    // Set up canvas render
    var render = Render.create({
      element: document.body,
      engine: engine,
      canvas: document.createElement('canvas'),
      options: {
        width: window.innerWidth,
        height: window.innerHeight,
        wireframes: false, // show solid shapes
        background: 'transparent' // transparent background
      }
    });
    
    Render.run(render);

    // Create a black square
    var square = Bodies.rectangle(200, 300, 50, 50, {
      render: {
        fillStyle: 'black',
        strokeStyle: 'black'
      }
    });

    // Create static walls to keep the square on screen
    var wallSettings = {
      isStatic: true,
      render: {
        fillStyle: 'black',
        strokeStyle: 'black'
      }
    };

    World.add(engine.world, [
      square,
      Bodies.rectangle(window.innerWidth / 2, -50, window.innerWidth, 100, wallSettings), // Top wall
      Bodies.rectangle(window.innerWidth / 2, window.innerHeight + 50, window.innerWidth, 100, wallSettings), // Bottom wall
      Bodies.rectangle(-50, window.innerHeight / 2, 100, window.innerHeight, wallSettings), // Left wall
      Bodies.rectangle(window.innerWidth + 50, window.innerHeight / 2, 100, window.innerHeight, wallSettings) // Right wall
    ]);

    // Run the engine
    Engine.run(engine);

    // Resize canvas on window resize
    window.addEventListener('resize', function() {
      render.canvas.width = window.innerWidth;
      render.canvas.height = window.innerHeight;
      Render.lookAt(render, {
        min: { x: 0, y: 0 },
        max: { x: window.innerWidth, y: window.innerHeight }
      });
    });

    // Move the square to the mouse position on click
    function getMousePos(canvas, evt) {
      var rect = canvas.getBoundingClientRect();
      return {
        x: evt.clientX - rect.left,
        y: evt.clientY - rect.top
      };
    }

    render.canvas.addEventListener('mousedown', function(evt) {
      Matter.Body.setPosition(square, getMousePos(render.canvas, evt));
    }, false);
</script>

</body>
</html>
